###################
## Kerstboom      #
###################
- id: kerstboom_aan
  alias: "Christmas: Kerstboom aan"
  trigger:
    - platform: state
      entity_id: binary_sensor.pir_woonkamer_motion
      to: "on"
    - platform: state
      entity_id: group.all_adults
      to: "home"
      from: "not_home"
  condition:
    - condition: time
      after: "06:45:00"
      before: "22:00:00"
    - condition: state
      entity_id: switch.kerstboom
      state: "off"
    - condition: state
      entity_id: input_boolean.enable_pir_woonkamer_automations
      state: "on"
  action:
    - service: homeassistant.turn_on
      entity_id: switch.kerstboom

##########################
## Kerstboom uit
##########################
- id: kerstboom_uit
  alias: "Christmas: Kerstboom uit"
  trigger:
    - platform: state
      entity_id: binary_sensor.pir_woonkamer_motion
      to: "off"
      for:
        minutes: 20
    - platform: state
      entity_id: group.all_adults
      from: "home"
      to: "not_home"
  action:
    - service: homeassistant.turn_off
      entity_id: switch.kerstboom
