##########################
## Update initial sensors
##########################
- id: update_sensors_initial
  alias: 'System: Update Sensors on startup'
  initial_state: 'on'
  trigger:
    - platform: homeassistant
      event: start
  action:
    - delay: '00:00:15'
    - service: homeassistant.update_entity
      entity_id: sensor.reistijd_thuis_werk
    - delay: '00:00:10'
    - service: homeassistant.update_entity
      entity_id: sensor.reistijd_werk_thuis
    - delay: '00:00:10'
    - service: zigbee2mqtt_networkmap.update

##########################
## Update Waze sensors during commute
##########################
- id: waze_update_morning_commute
  alias: 'Waze: update morning commute'
  initial_state: on
  trigger:
    - platform: time_pattern
      minutes: '/5'
      seconds: 00
  condition: 
  - condition: time
    after: '05:30:00'
    before: '08:00:00'
    weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
  action:
    - service: homeassistant.update_entity
      entity_id: sensor.reistijd_thuis_werk

- id: waze_update_evening_commute
  alias: 'Waze: update evening commute'
  initial_state: on
  trigger:
    - platform: time_pattern
      minutes: '/5'
      seconds: 00
  condition: 
  - condition: time
    after: '15:00:00'
    before: '19:00:00'
    weekday:
      - mon
      - tue
      - wed
      - thu
      - fri
  action:
    - service: homeassistant.update_entity
      entity_id: sensor.reistijd_werk_thuis

- id: waze_update_to_home
  alias: 'Waze: update to home'
  initial_state: on
  trigger:
    - platform: time_pattern
      minutes: '/5'
      seconds: 00
  condition:  
    condition: state
    entity_id: device_tracker.bob_bt
    state: not_home
  action:
    - service: homeassistant.update_entity
      entity_id: sensor.reistijd_bob_naar_huis
