# Updating sensors which have polling disabled for a reason

##########################
## Update Waze sensors
##########################
- id: update_waze_to_home
  alias: "Update: Waze travel time to home"
  initial_state: on
  trigger:
    - platform: time_pattern
      minutes: "/5"
      seconds: 00
    - platform: homeassistant
      event: start
  condition:
    condition: state
    entity_id: person.bob
    state: not_home
  action:
    - service: homeassistant.update_entity
      entity_id: sensor.reistijd_bob_naar_huis

##########################
## Update EV sensors
##########################
# This ID changes daily at 1am, so make sure we catch it
- id: update_ev_sensors
  alias: "Update: EV charger sensors"
  trigger:
    - platform: time
      at: "01:00:30"
    - platform: time
      at: "02:00:30"
    - platform: homeassistant
      event: start
  action:
    - alias: "Update EV charger IDs"
      service: homeassistant.update_entity
      entity_id:
        - sensor.ev_charger_id_b1
        - sensor.ev_charger_id_b5
    - alias: "Delay for 10 seconds to let both ID sensors settle"
      delay: 10
    - alias: "Update the EV sensors as they rely on the charger ID"
      service: homeassistant.update_entity
      entity_id:
        - sensor.ev_laadplek_b1_1
        - sensor.ev_laadplek_b1_2
        - sensor.ev_laadplek_b5_1
