##########################
## Don't forget to eat and turn off the TV... (non-schooldays)
##########################
- id: tv_time_make_breakfast_and_turn_off
  alias: "TV: Maak je ontbijt & zet uit"
  trigger:
    - platform: time
      at: input_datetime.time_tv_time_breakfast
      id: breakfast
    - platform: time
      at: input_datetime.time_tv_time_over
      id: tv_time_over
  condition:
    - condition: state
      entity_id: binary_sensor.schooldag
      state: "off"
  action:
    - alias: "Choose based on trigger"
      choose:
        - conditions:
            condition: trigger
            id: breakfast
          sequence:
            - service: notify.tv_woonkamer
              continue_on_error: true
              data:
                title: "Eten tijdens TV-tijd"
                message: "Denk eraan dat jullie tijdens de TV-tijd ontbijten?"
                data:
                  fontsize: "large"
                  position: "top-right"
                  duration: 30
                  transparency: "50%"
                  color: "amber"
            - delay: "00:25:00"
            - service: notify.tv_woonkamer
              continue_on_error: true
              data:
                title: "Eten tijdens TV-tijd"
                message: "Denk aan je ontbijt, je moet klaar zijn voor {{ states('input_datetime.time_tv_time_over') }}"
                data:
                  fontsize: "large"
                  position: "top-right"
                  duration: 30
                  transparency: "50%"
                  color: "amber"
        - conditions:
            condition: trigger
            id: tv_time_over
          sequence:
            - service: notify.tv_woonkamer
              continue_on_error: true
              data:
                title: "TV tijd is voorbij!"
                message: "Zetten jullie de TV uit en gaan jullie aankleden, tanden poetsen en deo opdoen?"
                data:
                  fontsize: "large"
                  position: "center"
                  duration: 60
                  transparency: "25%"
                  color: "red"

##########################
## Remember to brush your teeth and head off to school (schooldays)
##########################
- id: time_to_brush_your_teeth_and_go_to_school
  alias: "TTS: Tandenpoetsen & naar school"
  trigger:
    - platform: time
      at: input_datetime.time_tandenpoetsen_mini
      variables:
        child: "{{ states('input_text.naam_mini') }}"
        message: "Het is tijd om je tanden te poetsen."
        service: "tts_hele_huis"
        play: "{{ is_state('input_boolean.enable_morning_tts_mini', 'on')}}"
    - platform: time
      at: input_datetime.time_tandenpoetsen_puber
      variables:
        child: "{{ states('input_text.naam_puber') }}"
        message: "Het is tijd om je tanden te poetsen."
        service: "tts_woonkamer"
        play: "{{ is_state('input_boolean.enable_morning_tts_puber', 'on')}}"
    - platform: time
      at: input_datetime.time_schooltijd_pre_warning_mini
      variables:
        child: "{{ states('input_text.naam_mini') }}"
        message: "Het is tijd om schoenen aan te doen en naar school te gaan!"
        service: "tts_hele_huis"
        play: "{{ is_state('input_boolean.enable_morning_tts_mini', 'on')}}"
    - platform: time
      at: input_datetime.time_schooltijd_pre_warning_puber
      variables:
        child: "{{ states('input_text.naam_puber') }}"
        message: "Het is tijd om schoenen aan te doen en naar school te gaan!"
        service: "tts_woonkamer"
        play: "{{ is_state('input_boolean.enable_morning_tts_puber', 'on')}}"
  condition:
    - condition: state
      entity_id: binary_sensor.schooldag
      state: "on"
    - "{{ play }}"
  action:
    - service: notify.{{ service }}
      data:
        message: "{{ child }} {{ message }}"
    - delay: "00:01:00"
    - service: media_player.turn_off
      entity_id:
        - media_player.hele_huis
