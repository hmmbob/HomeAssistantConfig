postcodeloterij_package:
  rest:
    - resource_template: !secret postcodeloterij_url
      scan_interval: 43200
      headers:
        User-Agent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36"
      sensor:
        - name: Postcodeloterij aantal prijzen
          unique_id: postcodeloterij_aantal_prijzen
          value_template: "{{ value_json.prizeCount }}"
        - name: Postcodeloterij prijzen
          unique_id: postcodeloterij_prijzen
          value_template: >
            {% set ns = namespace(prizes=[]) %}
            {% for p in value_json.wonPrizes %}
              {% set ns.prizes = ns.prizes + [p.description ~ ' (â‚¬ ' ~'{:.2f}'.format(p.prizeValue / 100) ~ ')'] %}
            {% endfor %}
            {{ ns.prizes | join(', ') if ns.prizes else 'Helaas, pindakaas' }}
