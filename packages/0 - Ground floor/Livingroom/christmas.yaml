christmas_package:
  automation:
    - id: kerstboom_verlichting
      alias: "Zet de Kerstboomverlichting aan of uit"
      trigger:
        - alias: "Schakel in als iemand thuis komt"
          platform: state
          entity_id: group.all_adults
          to: "home"
          from: "not_home"
          id: "turn_on"
        - alias: "Schakel in als de verlichting beneden aan gaat"
          platform: state
          entity_id:
            - light.verlichting_eetkamer
            - light.verlichting_woonkamer
          to: "on"
          id: "turn_on"
        - alias: "Schakel uit als we weg gaan"
          platform: state
          entity_id: group.all_adults
          from: "home"
          to: "not_home"
          id: "turn_off"
        - alias: "Ga sowieso uit om 22:00"
          platform: time
          at: "22:00:00"
          id: "turn_off"
        - alias: "Schakel uit als we de lampen 's avonds uitzetten"
          trigger: state
          entity_id: light.verlichting_woonkamer
          to: "off"
          id: "turn_off_lights"
      actions:
        - alias: "Controleer wat te doen"
          choose:
            - alias: "Moeten we de lampen aanzetten?"
              conditions:
                - "{{ trigger.id == 'turn_on' }}"
                - condition: time
                  after: "06:20:00"
                  before: "22:00:00"
              sequence:
                - action: light.turn_on
                  target:
                    entity_id: light.twinkly_kerstboom_boven
            - alias: "Moeten we de lampen uitzetten?"
              conditions:
                - "{{ trigger.id == 'turn_off' }}"
              sequence:
                - action: light.turn_off
                  target:
                    entity_id: light.twinkly_kerstboom_boven
            - alias: "Moeten we de lampen uitzetten omdat alle andere lampen 's avonds uit zijn?"
              conditions:
                - "{{ trigger.id == 'turn_off_lights' }}"
                - condition: time
                  after: "21:00:00"
              sequence:
                - action: light.turn_off
                  target:
                    entity_id: light.twinkly_kerstboom_boven
