vacation_mode_package:
  input_boolean:
    vacation_mode_away:
      name: "Vakantie (weg)"
      icon: mdi:home-lock
    vacation_mode_home:
      name: "Vakantie (thuis)"
      icon: mdi:home-map-marker

  input_datetime:
    time_vacation_lights_start:
      name: Vacation lights start
      has_time: true
    time_vacation_lights_end:
      name: Vacation lights end
      has_time: true

  automation:
    #############################
    ## Vacation lights          #
    #############################
    - id: vacation_turn_on_time
      alias: "Zet de verlichting aan (vacation mode)"
      initial_state: on
      trigger:
        platform: time
        at: input_datetime.time_vacation_lights_start
      condition:
        - condition: state
          entity_id: input_boolean.vacation_mode_away
          state: "on"
      action:
        - delay: "{{ range(30*60) | random }}"
          alias: "Random delay between now and 30mins"
        - service: homeassistant.turn_on
          entity_id:
            - switch.grijze_lamp
            - light.staande_lamp_switch
        - service: logbook.log
          data:
            name: Vacation
            message: Lights turned on at {{ now().strftime('%H:%M') }}.
            domain: light
        - service: notify.mobile_app_sm_a556b
          data:
            message: I turned your vacation lights on at {{ now().strftime('%H:%M') }}.
            title: Vacation lights

    - id: vacation_turn_off_time
      alias: "Zet de verlichting uit (vacation mode)"
      initial_state: on
      trigger:
        platform: time
        at: input_datetime.time_vacation_lights_end
      condition:
        - condition: state
          entity_id: input_boolean.vacation_mode_away
          state: "on"
      action:
        - delay: "{{ range(15*60) | random }}"
          alias: "Random delay between now and 30mins"
        - service: homeassistant.turn_off
          entity_id:
            - switch.grijze_lamp
            - light.staande_lamp_switch
        - service: logbook.log
          data:
            name: Vacation
            message: Lights turned off at {{ now().strftime('%H:%M') }}.
            domain: light
        - service: notify.mobile_app_sm_a556b
          data:
            message: I turned your lights off at {{ now().strftime('%H:%M') }}.
            title: Vacation lights
