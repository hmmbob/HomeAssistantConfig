kids_morning_routines_package:
  binary_sensor:
    - platform: workday
      name: "Schooldag"
      country: NL
      remove_holidays:
        - "Goede Vrijdag"
      add_holidays: !include /config/includes/holidays.yaml

  input_datetime:
    time_schooltijd:
      name: "Schooltijd: Toon & verlichting uit"
      has_time: true
    time_tv_time_breakfast:
      name: "TV: Melding ontbijt bij TV"
      has_time: true
    time_tv_time_over:
      name: "TV: Melding TV tijd voorbij"
      has_time: true

  automation:
    ##########################
    ## Don't forget to eat and turn off the TV... (non-schooldays)
    ##########################
    - id: tv_time_make_breakfast_and_turn_off
      alias: "TV: Maak je ontbijt & zet uit"
      trigger:
        - platform: time
          at: input_datetime.time_tv_time_breakfast
          id: breakfast
        - platform: time
          at: input_datetime.time_tv_time_over
          id: tv_time_over
      condition:
        - condition: state
          entity_id: binary_sensor.schooldag
          state: "off"
      action:
        - alias: "Choose based on trigger"
          choose:
            - conditions:
                condition: trigger
                id: breakfast
              sequence:
                - service: notify.tv_woonkamer
                  continue_on_error: true
                  data:
                    title: "Eten tijdens TV-tijd"
                    message: "Denk eraan dat jullie tijdens de TV-tijd ontbijten?"
                    data:
                      fontsize: "large"
                      position: "top-right"
                      duration: 30
                      transparency: "50%"
                      color: "amber"
                - delay: "00:25:00"
                - service: notify.tv_woonkamer
                  continue_on_error: true
                  data:
                    title: "Eten tijdens TV-tijd"
                    message: "Denk aan je ontbijt, je moet klaar zijn voor {{ states('input_datetime.time_tv_time_over') }}"
                    data:
                      fontsize: "large"
                      position: "top-right"
                      duration: 30
                      transparency: "50%"
                      color: "amber"
            - conditions:
                condition: trigger
                id: tv_time_over
              sequence:
                - service: notify.tv_woonkamer
                  continue_on_error: true
                  data:
                    title: "TV tijd is voorbij!"
                    message: "Zetten jullie de TV uit en gaan jullie aankleden, tanden poetsen en deo opdoen?"
                    data:
                      fontsize: "large"
                      position: "center"
                      duration: 60
                      transparency: "25%"
                      color: "red"
