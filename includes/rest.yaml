##########################
## EV charger status #1
##########################
- resource: !secret oplaadpalen_url_1
  scan_interval: 21600 # 6 hrs
  sensor:
    - name: "EV Charger ID B1"
      value_template: "{{ value_json.features[0].properties.external_reference }}"
# This could have been a regular REST sensor, but I decided to
# keep this sensor close to the one below, for readability.

- resource_template: https://www.oplaadpalen.nl/api/map/location/{{ states('sensor.ev_charger_id_b1') }}
  scan_interval: 300 # 5min
  sensor:
    - name: EV laadplek B1-1
      value_template: "{{ value_json.data.evses.0.status }}"
    - name: EV laadplek B1-2
      value_template: "{{ value_json.data.evses.1.status }}"

##########################
## EV charger status #2
##########################
- resource: !secret oplaadpalen_url_2
  scan_interval: 21600 # 6 hrs
  sensor:
    - name: "EV Charger ID B5"
      value_template: "{{ value_json.features[0].properties.external_reference }}"

- resource_template: https://www.oplaadpalen.nl/api/map/location/{{ states('sensor.ev_charger_id_b5') }}
  scan_interval: 300
  sensor:
    - name: EV laadplek B5-1
      value_template: "{{ value_json.data.evses.0.status }}"
    - name: EV laadplek B5-2
      value_template: "{{ value_json.data.evses.1.status }}"

##########################
## DUS Waiting times
##########################
- resource: https://www.dus.com/api/sitecore/flightapi/WaitingTimes?lang=de
  headers:
    X-Requested-With: XMLHttpRequest
  scan_interval: 300
  sensor:
    - name: "Wachttijd A-gates"
      icon: mdi:airplane-clock
      value_template: "{{ value_json.data.0.waitingTime }}"
      json_attributes_path: "$.data.0"
      json_attributes:
        - name
        - waitingTime
        - gateTerminal
        - waitingTimeText
      unit_of_measurement: min
    - name: "Wachttijd B-gates"
      icon: mdi:airplane-clock
      value_template: "{{ value_json.data.1.waitingTime }}"
      json_attributes_path: "$.data.1"
      json_attributes:
        - name
        - waitingTime
        - gateTerminal
        - waitingTimeText
      unit_of_measurement: min
    - name: "Wachttijd C-gates"
      icon: mdi:airplane-clock
      value_template: "{{ value_json.data.2.waitingTime }}"
      json_attributes_path: "$.data.2"
      json_attributes:
        - name
        - waitingTime
        - gateTerminal
        - waitingTimeText
      unit_of_measurement: min
