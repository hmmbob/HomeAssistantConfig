#################################################################
## Home Assistant Core
#################################################################
homeassistant:
  name: Home
  latitude: !secret home_latitude
  longitude: !secret home_longitude
  elevation: 19
  unit_system: metric
  time_zone: Europe/Amsterdam
  customize: !include includes/customize.yaml
  auth_providers:
    - type: homeassistant
    - type: legacy_api_password
      api_password: !secret http_api_password
  auth_mfa_modules:
    - type: totp
      name: Authenticator app
    - type: notify
      message: 'Access token: {}'

default_config:

recorder:
  db_url: !secret recorder_url
  purge_interval: 1
  purge_keep_days: 31
  include: !include includes/recorder-history.yaml

history:
  include: !include includes/recorder-history.yaml

logger:
  default: warn

logbook:
  exclude:
    entities:
      - binary_sensor.pir_woonkamer_motion
      - sensor.outside_temperature
      - sensor.room_temperature

mqtt:
  broker: !secret mqtt_broker
  port: !secret mqtt_port
  client_id: home-assistant
  username: !secret mqtt_user
  password: !secret mqtt_password
  birth_message:
    topic: 'hass/status'
    payload: 'online'
  will_message:
    topic: 'hass/status'
    payload: 'offline'
  discovery: true

zwave:
  usb_path: /dev/ttyACM1

#################################################################
## Frontend
#################################################################  
http:
  server_port: !secret http_server_port
  ip_ban_enabled: True
  login_attempts_threshold: 2
  use_x_forwarded_for: true
  trusted_proxies: !secret http_trusted_proxies
  base_url: !secret http_base_url

lovelace:
  mode: yaml
  resources:
    - url: /hacsfiles/custom-header/custom-header.js
      type: module
    - url: /hacsfiles/lovelace-swipe-navigation/swipe-navigation.js
      type: module
    - url: /hacsfiles/button-card/button-card.js
      type: module
    - url: /hacsfiles/weather-card/weather-card.js
      type: module
    - url: /hacsfiles/mini-graph-card/mini-graph-card-bundle.js
      type: module
    - url: /hacsfiles/mini-media-player/mini-media-player-bundle.js
      type: module
    - url: /hacsfiles/lovelace-auto-entities/auto-entities.js
      type: module
    - url: /hacsfiles/lovelace-battery-entity/battery-entity.js
      type: module
    - url: /hacsfiles/simple-thermostat/simple-thermostat.js
      type: module

frontend:
  themes: !include_dir_named themes/

#################################################################
## Includes
#################################################################  
automation: !include_dir_merge_list automation/
binary_sensor: !include includes/binary_sensor.yaml
device_tracker: !include includes/device_tracker.yaml
emulated_hue: !include includes/emulated_hue.yaml
google_assistant: !include includes/googleassistant.yaml
group: !include includes/groups.yaml
input_boolean: !include includes/input_boolean.yaml
input_select: !include includes/input_select.yaml
rss_feed_template: !include includes/rss.yaml
scene: !include includes/scenes.yaml
script: !include includes/scripts.yaml
sensor: !include includes/sensors.yaml  
switch: !include includes/switch.yaml
timer: !include includes/timer.yaml
#zone: !include includes/zones.yaml

#################################################################
## Components
#################################################################  
camera:
  name: Hmmbob
  platform: generic
  still_image_url: !secret google_maps_url
  limit_refetch_to_url_change: true

cast:
  media_player:
    - host: !secret cast_ip_cc
    - host: !secret cast_ip_gh
    - host: !secret cast_ip_hmt
    - host: !secret cast_ip_hmz
    - host: !secret cast_ip_sb
    - host: !secret cast_ip_androidtv
    - host: !secret cast_ip_hub

climate:
  platform: toon_climate
  name: Woonkamer
  host: !secret toon_host
  port: !secret toon_port
  scan_interval: 15

duckdns:
  domain: !secret duckdns_domain
  access_token: !secret duckdns_token

#google:
#  client_id: !secret google_calendar_client_id
#  client_secret: !secret google_calendar_client_secret

hacs:
  token: !secret hacs_token

#media_player:
#  - platform: spotify
#    client_id: !secret spotify_client_id
#    client_secret: !secret spotify_client_secret

notify:
  - name: Google
    platform: html5
    vapid_pub_key: !secret gcm-vapid-public-key
    vapid_prv_key: !secret gcm-vapid-private-key
    vapid_email: !secret gcm-vapid-email
  - platform: nfandroidtv
    name: TV
    host: !secret cast_ip_androidtv

tts:
  - platform: google_translate
    base_url: !secret tts_base_url
    time_memory: 60

weather:
  - platform: darksky
    api_key: !secret darksky_api
    mode: daily

webhook:

zigbee2mqtt_networkmap:
panel_iframe:
  networkmap:
    title: 'Zigbee Map'
    url: '/local/community/zigbee2mqtt_networkmap/map.html'
    icon: 'mdi:graphql'