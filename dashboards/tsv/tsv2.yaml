title: TSV 2
path: tsv2
theme: Hmmbob dark theme
type: custom:vertical-layout
layout:
  width: 500

cards:
  - type: grid
    columns: 2
    square: false
    cards:
      - !include common/weather-card.yaml
      - type: custom:mushroom-chips-card
        alignment: end
        chips:
          - !include common/chip-knmi_temp.yaml

          - type: entity
            entity: sensor.xiaomi_temperature_humidity_sensor_2_temperature
            icon: mdi:home-thermometer
            tap_action:
              action: none
            card_mod:
              style: |
                ha-card {
                  --chip-background: transparent;
                  --chip-border-color: transparent;
                  --chip-box-shadow: none;
                }

          - !include common/chip-fan.yaml
          - !include common/chip-cctv.yaml
          - !include common/chip-omroep.yaml

  - type: grid
    columns: 2
    square: false
    cards:
      - type: vertical-stack
        cards:
          - !include common/button-lights.yaml
          - !include common/kids-devices.yaml

          - type: vertical-stack
            cards:
              - type: "custom:vertical-stack-in-card"
                card_mod:
                  style: |
                    ha-card { height: 55px !important; }
                cards:
                  - type: custom:mushroom-media-player-card
                    entity: media_player.kantoor
                    media_controls:
                      - on_off
                      - previous
                      - play_pause_stop
                      - next
                    volume_controls:
                      - volume_mute
                      - volume_set
                      - volume_buttons
                    collapsible_controls: true
                    layout: horizontal
                    show_volume_level: true
                    use_media_info: true
                    tap_action:
                      action: fire-dom-event
                      browser_mod:
                        service: browser_mod.sequence
                        data:
                          sequence:
                            - service: browser_mod.more_info
                              data:
                                entity: media_player.kantoor
                            - service: browser_mod.delay
                              data:
                                time: 10000
                            - service: browser_mod.more_info
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: media_player.kantoor
                        state: "off"
                    card_mod:
                      style:
                        .: |
                          ha-card {
                            border: solid 0px;
                            box-shadow: none;
                          }
                    card:
                      type: custom:mushroom-template-card
                      icon_color: deep-purple
                      icon: mdi:numeric-5
                      card_mod:
                        style:
                          .: |
                            ha-card {
                              background: none;
                              margin-left: 310px;
                              top: -54px;
                              width: 40px;
                              border: solid 0px;
                              box-shadow: none;
                            }
                      icon_tap_action:
                        action: perform-action
                        perform_action: media_player.play_media
                        target:
                          entity_id: media_player.kantoor
                        data:
                          media_content_id: https://playerservices.streamtheworld.com/api/livestream-redirect/RADIO538.mp3
                          media_content_type: music

      ### Right column
      - type: custom:calendar-card-pro
        entities:
          - entity: calendar.bl
            accent_color: "#0911e8"
            blocklist: "restafval|gft|plasticinzameling"
          - entity: calendar.bv
            accent_color: "#f266eb"
          - entity: calendar.m
            accent_color: "#8607f5"
          - entity: calendar.t
            accent_color: "#20572f"
          - entity: calendar.familie
            accent_color: "#d98b04"
            allowlist: "verjaardag|trouwdag" # Celebration events
            label: "ðŸŽ‰" # Add celebration label to these events
          - entity: calendar.familie
            accent_color: "#d98b04"
            allowlist: "Picnic|Jumbo" # Grocery delivery events
            label: "ðŸ›’" # Add shopping cart
          - entity: calendar.familie
            accent_color: "#f266eb" # Apply pinks color to wife's work schedule
            allowlist: "B[a-zA-Z]{5}\\s(vrij|werken)"
          - entity: calendar.familie
            accent_color: "#d98b04" # Exclude everything included above
            blocklist: "tafel dekken|vakantie|verjaardag|trouwdag|B[a-zA-Z]{5}\\s(vrij|werken)|Picnic"
        date_vertical_alignment: top
        day_font_size: "24px"
        day_separator_color: "#03a9f430"
        day_separator_width: "1px"
        days_to_show: 2
        event_background_opacity: 40
        event_font_size: "13px"
        event_spacing: 6px
        filter_duplicates: true
        first_day_of_week: monday
        refresh_interval: 10
        show_location: false
        show_single_allday_time: false
        split_multiday_events: true
        today_indicator: glow
        today_indicator_position: "7px 27px"
        vertical_line_width: 5px
        card_mod: # Show time inline
          style: |
            div.event-content {
              display: grid;
              grid-template-areas: 
                "title time"
                "location location";
              grid-template-columns: 1fr auto;
              column-gap: 10px;
              row-gap: 0px;
            }
            div.summary {
              grid-area: title;
              overflow: hidden;
              text-overflow: ellipsis;
            }
            div.time {
              grid-area: time;
              white-space: nowrap;
            }
            div.location {
              grid-area: location;
              white-space: normal;
              overflow: hidden;
              text-overflow: ellipsis;
            }
            div.time-location {
              display: contents;
            }
        tap_action:
          action: navigate
          navigation_path: /tsv-dashboards/calendar
