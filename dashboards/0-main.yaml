####################
# Start page       #
####################
path: start
title: Start
icon: mdi:home-assistant
cards:
  - type: vertical-stack
    cards:
      - type: horizontal-stack
        card_mod:
          style:
            .: |
              ha-card {
                box-shadow: none;
              }
        cards:
          - type: markdown
            card_mod:
              style:
                .: |
                  ha-card {
                    box-shadow: none;
                    --ha-card-background: rgba(0, 0, 0, 0.0)
                  }
                ha-markdown$: |
                  h1 {
                      font-size: 18px !important;
                      font-weight: 400 !important;
                      color: var(--app-header-text-color);
                    }
            content: |
              {% if now().hour < 5 %}
              # Goede nacht, {{user}}!
              {% elif now().hour < 12 %}
              # Goede morgen, {{user}}!
              {% elif now().hour < 18 %}
              # Goede middag, {{user}}!
              {% else %}
              # Fijne avond, {{user}}!
              {% endif %}
          - type: custom:mushroom-chips-card
            card_mod:
              style: |
                ha-card {
                  margin: 9px 0px 0px 0px;
                }
            alignment: end
            chips:
              - type: weather
                entity: weather.knmi_home
                show_conditions: true
                show_temperature: true

      - type: custom:mushroom-chips-card
        alignment: justify
        chips:
          - type: entity
            entity: person.bob
            use_entity_picture: true
          - type: entity
            entity: !secret person_mw
            use_entity_picture: true
          - type: entity
            entity: !secret person_puber
            use_entity_picture: true
          - type: entity
            entity: !secret person_mini
            use_entity_picture: true

      ###########################
      # First row of room cards #
      ###########################
      - type: horizontal-stack
        cards:
          ### Room card woonkamer ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                icon: mdi:sofa-outline
                icon_color: green
                primary: Woonkamer
                secondary: "{{ states('sensor.woonkamer_temperature') | round(1, default=0) }} °C"
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/living-room
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(128, 199, 149) !important;
                        --shape-color: rgba(128, 199, 149, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                entity: light.verlichting_woonkamer
                icon: mdi:lightbulb-group
                icon_color: |-
                  {{ "orange" if is_state('light.verlichting_woonkamer', 'on') else "grey" }}
                card_mod: &1st_button_style
                  style:
                    .: |
                      ha-card {
                        width: 66px;
                        margin-left: 66%;
                        top: -155px;
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 40px;
                      }
              - type: custom:mushroom-template-card
                entity: climate.airco_woonkamer
                icon: "{{states('sensor.template_airco_woonkamer_icon')}}"
                icon_color: "{{state_attr('sensor.template_airco_woonkamer_icon', 'color')}}"
                tap_action:
                  action: more-info
                card_mod: &2nd_button_style
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -159px;
                      background: none;
                    }
                    :host {
                        --mush-icon-size: 40px;
                      }
              - type: custom:mushroom-template-card
                entity: switch.genie
                icon: phu:rituals
                icon_color: |-
                  {{ "green" if is_state('switch.genie', 'on') else "dark-grey" }}
                card_mod: &3rd_button_style
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -163px;
                      background: none;
                    }
                    :host {
                        --mush-icon-size: 40px;
                      }
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/woonkamer
                card_mod: &4th_button_style
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -167px;
                      background: none;
                    }
                    :host {
                        --mush-icon-size: 40px;
                      }
          ### Room card eetkamer ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                icon: mdi:silverware-variant
                icon_color: yellow
                primary: Eetkamer
                secondary: "{{ states('sensor.woonkamer_temperature') | round(1, default=0) }} °C"
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/dining-room
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(255, 167, 38) !important;
                        --shape-color: rgba(255, 167, 38, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                entity: light.verlichting_eetkamer
                icon: mdi:lightbulb-group
                icon_color: |-
                  {{ "orange" if is_state('light.verlichting_eetkamer', 'on') else "grey" }}
                card_mod: *1st_button_style
              - type: custom:mushroom-template-card
                entity: climate.airco_woonkamer
                icon: "{{states('sensor.template_airco_woonkamer_icon')}}"
                icon_color: "{{state_attr('sensor.template_airco_woonkamer_icon', 'color')}}"
                tap_action:
                  action: more-info
                card_mod: *2nd_button_style
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/dining-room
                card_mod: *3rd_button_style
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/dining-room
                card_mod: *4th_button_style

      ###########################
      # 2nd row of room cards   #
      ###########################
      - type: horizontal-stack
        cards:
          ### Room card salon ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                primary: Salon
                secondary: "{{ states('sensor.salon_temperatuur') | round(1, default=0) }} °C"
                icon: mdi:sofa
                icon_color: rgb(219, 148, 228)
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/salon
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(219, 148, 228) !important;
                        --shape-color: rgb(219, 148, 228, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                entity: light.alle_lampen_salon
                icon: mdi:lightbulb-group
                icon_color: |-
                  {{ "orange" if is_state('light.alle_lampen_salon', 'on') else "grey" }}
                card_mod: *1st_button_style
              - type: custom:mushroom-template-card
                entity: climate.salon
                icon: mdi:radiator
                icon_color: |-
                  {{ "orange" if is_state(entity, 'heat') else "grey" }}
                tap_action:
                  action: more-info
                card_mod: *2nd_button_style
              - type: custom:mushroom-template-card
                entity: climate.kacheltje
                icon: mdi:heat-wave
                icon_color: |-
                  {{ "orange" if states('climate.kacheltje') in ['heat','auto'] else "grey" }}
                tap_action:
                  action: more-info
                card_mod: *3rd_button_style
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/salon
                card_mod: *4th_button_style
          ### Room card MBR ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                icon: mdi:bed-king-outline
                icon_color: red
                primary: Master bedroom
                secondary: "{{ states('sensor.xiaomi_temperature_humidity_sensor_5_temperature') | round(1, default=0) }} °C"
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/mbr
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(229, 115, 115) !important;
                        --shape-color: rgba(229, 115, 115, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                entity: switch.inloopkast
                icon: |-
                  {{ "mdi:lightbulb-on" if is_state(entity, 'on') else "mdi:lightbulb" }}
                icon_color: |-
                  {{ "amber" if is_state(entity, 'on') else "grey" }}
                tap_action:
                  action: perform-action
                  perform_action: switch.toggle
                  data: {}
                  target:
                    entity_id: switch.inloopkast
                card_mod:
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -155px;
                      background: none;
                    }
                    :host {
                      --mush-icon-size: 40px;
                    }
                    ha-state-icon {
                      {{ "animation: illumination 3s infinite;" if is_state(config.entity, 'on') }}
                    }

              - type: custom:mushroom-template-card
                entity: climate.airco_master_bedroom
                icon: "{{states('sensor.template_airco_mbr_icon')}}"
                icon_color: "{{state_attr('sensor.template_airco_mbr_icon', 'color')}}"
                tap_action:
                  action: more-info
                card_mod: *2nd_button_style
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/mbr
                card_mod: *3rd_button_style
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/mbr
                card_mod: *4th_button_style

      ###########################
      # 3rd row of room cards   #
      ###########################
      - type: horizontal-stack
        cards:
          ### Room card Slaapkamer M ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                primary: Slaapkamer M
                secondary: "{{ states('sensor.xiaomi_temperature_humidity_sensor_4_temperature') | round(1, default=0) }} °C"
                icon: mdi:bed-queen
                icon_color: dark-green
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/bed-room-maxi
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(27, 94, 32) !important;
                        --shape-color: rgb(27, 94, 32, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                entity: light.verlichting_pubercave
                icon: >-
                  {{ "mdi:led-strip-variant" if is_state('light.verlichting_pubercave','on') else "mdi:led-strip-variant-off" }}
                icon_color: |-
                  {{ "orange" if is_state('light.verlichting_pubercave', 'on') else "grey" }}
                card_mod: *1st_button_style
              - type: custom:mushroom-template-card
                entity: climate.airco_slaapkamer_m
                icon: "{{states('sensor.template_airco_slaapkamer_m_icon')}}"
                icon_color: "{{state_attr('sensor.template_airco_slaapkamer_m_icon', 'color')}}"
                tap_action:
                  action: more-info
                card_mod: *2nd_button_style
              - type: custom:mushroom-template-card
                entity: binary_sensor.is_pubercave_pc_on
                icon: mdi:desktop-classic
                icon_color: |-
                  {{ "green" if is_state('binary_sensor.is_pubercave_pc_on', 'on') else "grey" }}
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -163px;
                      background: none;
                    }
                    ha-state-icon {
                    {% if is_state(config.entity, 'on')%}
                      animation: boing 3s ease infinite;
                      transform-origin: 50% 90%;
                    {% endif %}
                    }
                    :host {
                      --mush-icon-size: 40px;
                    }
              - type: custom:mushroom-template-card
                entity: binary_sensor.is_pubercave_tv_on
                icon: mdi:television
                icon_color: |-
                  {{ "green" if is_state('binary_sensor.is_pubercave_tv_on', 'on') else "grey" }}
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: TV Puber
                      content:
                        type: vertical-stack
                        cards:
                          - type: custom:mushroom-template-card
                            primary: "TV staat {{ state_translated('binary_sensor.is_pubercave_tv_on') | lower }}"
                            secondary: "Vandaag: {{ ((states('sensor.pubercave_tv_on_today') | float(0)) * 3600) | timestamp_custom('%-Hu%M', false) }}"
                            entity: binary_sensor.is_pubercave_tv_on
                            icon: "{{ 'mdi:television' if is_state('binary_sensor.is_pubercave_tv_on','on') else 'mdi:television-off' }}"
                            icon_color: >-
                              {{ "green" if is_state('binary_sensor.is_pubercave_tv_on','on') else "grey" }}
                            tap_action:
                              action: more-info
                          - type: custom:mini-media-player
                            entity: media_player.tv_zolder
                            icon: mdi:cast
                            artwork: cover
                            artwork_border: true
                            power_color: true
                            scroll_info: true
                            show_source: true
                hold_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -167px;
                      background: none;
                    }
                    ha-state-icon {
                    {% if is_state(config.entity, 'on')%}
                      animation: boing 3s ease infinite;
                      transform-origin: 50% 90%;
                    {% endif %}
                    }
                    :host {
                      --mush-icon-size: 40px;
                    }

          ### Room card mini ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                icon: mdi:bed
                icon_color: blue
                primary: Slaapkamer T
                secondary: "{{ states('sensor.xiaomi_temperature_humidity_sensor_3_temperature') | round(1, default=0) }} °C"
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/bed-room-mini
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(33, 150, 243) !important;
                        --shape-color: rgba(33, 150, 243, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                entity: light.verlichting_minicave
                icon: >-
                  {{ "mdi:led-strip-variant" if is_state('light.ledstrip_bureau_mini','on') else "mdi:led-strip-variant-off" }}
                icon_color: grey
                card_mod:
                  style:
                    mushroom-shape-icon$: |
                      .shape {
                        {% set r = state_attr('light.ledstrip_bureau_mini', 'rgb_color')[0] %}
                        {% set g = state_attr('light.ledstrip_bureau_mini', 'rgb_color')[1] %}
                        {% set b = state_attr('light.ledstrip_bureau_mini', 'rgb_color')[2] %}
                      {% if is_state('light.ledstrip_bureau_mini', 'on') %}
                        --icon-color: rgb( {{r}}, {{g}}, {{b}} ) !important;
                        --shape-color: rgba( {{r}}, {{g}}, {{b}}, 0.2 ) !important;
                      {% endif %}
                      }
                    .: |
                      ha-card {
                        width: 66px;
                        margin-left: 66%;
                        top: -155px;
                      :host {
                        --mush-icon-size: 40px;
                      }
              - type: custom:mushroom-template-card
                entity: climate.airco_slaapkamer_t
                icon: "{{states('sensor.template_airco_slaapkamer_t_icon')}}"
                icon_color: "{{state_attr('sensor.template_airco_slaapkamer_t_icon', 'color')}}"
                tap_action:
                  action: more-info
                card_mod: *2nd_button_style
              - type: custom:mushroom-template-card
                entity: binary_sensor.minicave_pc
                icon: mdi:desktop-classic
                icon_color: |-
                  {{ "green" if is_state('binary_sensor.minicave_pc', 'on') else "grey" }}
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -163px;
                      background: none;
                    }
                    ha-state-icon {
                    {% if is_state(config.entity, 'on')%}
                      animation: boing 3s ease infinite;
                      transform-origin: 50% 90%;
                    {% endif %}
                    }
                    :host {
                      --mush-icon-size: 40px;
                    }
              - type: custom:mushroom-template-card
                entity: binary_sensor.minicave_tv
                icon: mdi:television
                icon_color: |-
                  {{ "green" if is_state('binary_sensor.minicave_tv', 'on') else "grey" }}
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: TV Mini
                      content:
                        type: custom:mini-media-player
                        entity: media_player.tv_t
                        icon: mdi:cast
                        artwork: cover
                        artwork_border: true
                        power_color: true
                        scroll_info: true
                        show_source: true
                hold_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -167px;
                      background: none;
                    }
                    ha-state-icon {
                    {% if is_state(config.entity, 'on')%}
                      animation: boing 3s ease infinite;
                      transform-origin: 50% 90%;
                    {% endif %}
                    }
                    :host {
                      --mush-icon-size: 40px;
                    }

      ###########################
      # 4th row of room cards   #
      ###########################
      - type: horizontal-stack
        cards:
          ### Room card kantoor ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                primary: Kantoor
                secondary: "{{ states('sensor.xiaomi_temperature_humidity_sensor_2_temperature') | round(1, default=0) }} °C"
                icon: mdi:desk
                icon_color: blue
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/office
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(63, 81, 181) !important;
                        --shape-color: rgb(63, 81, 181, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/office
                card_mod: *1st_button_style
              - type: custom:mushroom-template-card
                entity: climate.kantoor
                icon: mdi:radiator
                icon_color: |-
                  {{ "orange" if is_state(entity, 'heat') else "grey" }}
                tap_action:
                  action: more-info
                card_mod: *2nd_button_style
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/office
                card_mod: *3rd_button_style
              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/office
                card_mod: *4th_button_style
          ### Room card other ###
          - type: custom:vertical-stack-in-card
            card_mod:
              style: |
                ha-card { height: 225px !important; }
            cards:
              - type: custom:mushroom-template-card
                primary: Overig
                secondary: "."
                icon: mdi:cog
                icon_color: yellow
                layout: horizontal
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/other
                card_mod:
                  style:
                    mushroom-state-info$: |
                      .primary {
                        font-size: 16px !important;
                        position: relative;
                        top: -47px;
                        left: -150px;
                        overflow: visible !important;
                      }
                      .secondary {
                        position: relative;
                        overflow: visible !important;
                        top: -49px;
                        left: -150px;
                      }
                    mushroom-shape-icon$: |
                      .shape {
                        position: relative;
                        left: -32px;
                        top: 105px;
                        --icon-color: rgb(255, 238, 88) !important;
                        --shape-color: rgb(255, 238, 88, 0.2) !important;
                      }
                    .: |
                      ha-card {
                        background: none;
                      }
                      :host {
                        --mush-icon-size: 140px;
                      }
              - type: custom:mushroom-template-card
                entity: light.badkamer
                icon: mdi:shower
                icon_color: |-
                  {{ "orange" if is_state('light.badkamer', 'on') else "grey" }}
                tap_action:
                  action: perform-action
                  perform_action: light.toggle
                  data: {}
                  target:
                    entity_id: light.badkamer
                card_mod: *1st_button_style
              - type: custom:mushroom-template-card
                icon: mdi:account-voice
                icon_color: grey
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: Speel een bericht af
                      content:
                        type: vertical-stack
                        cards:
                          - type: entities
                            state_color: true
                            entities:
                              - input_select.tts_target
                              - input_text.tts_message
                              - entity: script.play_tts_message
                                icon: mdi:account-voice
                                name: "Speel bericht af"
                          - type: heading
                            heading: Standaard meldingen
                          - type: grid
                            columns: 2
                            square: false
                            cards:
                              - type: custom:mushroom-template-card
                                primary: "Het eten is over 5 minuten klaar"
                                icon: mdi:fast-forward-5
                                icon_color: |-
                                  {{ "yellow" if is_state('input_select.kiosk_announcement', '5min_warning')  else "var(--color)" }}
                                layout: vertical
                                tap_action:
                                  action: perform-action
                                  perform_action: script.kiosk_announcement
                                  data:
                                    announcement: 5min_warning
                                hold_action:
                                  action: more-info
                              - type: custom:mushroom-template-card
                                primary: "Het eten is klaar"
                                icon: mdi:food-turkey
                                icon_color: |-
                                  {{ "yellow" if is_state('input_select.kiosk_announcement', 'dinner_time')  else "var(--color)" }}
                                layout: vertical
                                tap_action:
                                  action: perform-action
                                  perform_action: script.kiosk_announcement
                                  data:
                                    announcement: dinner_time
                                hold_action:
                                  action: more-info
                              - type: custom:mushroom-template-card
                                primary: "Tafeldekken"
                                icon: mdi:silverware-variant
                                icon_color: |-
                                  {{ "yellow" if is_state('input_select.kiosk_announcement', 'tafeldekken')  else "var(--color)" }}
                                layout: vertical
                                tap_action:
                                  action: perform-action
                                  perform_action: script.kiosk_announcement
                                  data:
                                    announcement: tafeldekken
                                hold_action:
                                  action: more-info
                              - type: custom:mushroom-template-card
                                primary: "Komen jullie naar beneden?"
                                icon: mdi:stairs-down
                                icon_color: |-
                                  {{ "yellow" if is_state('input_select.kiosk_announcement', 'stairs')  else "var(--color)" }}
                                layout: vertical
                                tap_action:
                                  action: perform-action
                                  perform_action: script.kiosk_announcement
                                  data:
                                    announcement: stairs
                                hold_action:
                                  action: more-info
                              - type: custom:mushroom-template-card
                                primary: "{{states('input_text.naam_puber')}}, kom je naar beneden?"
                                icon: mdi:human-male-male
                                icon_color: |-
                                  {{ "yellow" if is_state('input_select.kiosk_announcement', 'maxi')  else "var(--color)" }}
                                layout: vertical
                                tap_action:
                                  action: perform-action
                                  perform_action: script.kiosk_announcement
                                  data:
                                    announcement: maxi
                                hold_action:
                                  action: more-info
                              - type: custom:mushroom-template-card
                                primary: "{{states('input_text.naam_mini')}}, kom je naar beneden?"
                                icon: mdi:human-male-boy
                                icon_color: |-
                                  {{ "yellow" if is_state('input_select.kiosk_announcement', 'mini')  else "var(--color)" }}
                                layout: vertical
                                tap_action:
                                  action: perform-action
                                  perform_action: script.kiosk_announcement
                                  data:
                                    announcement: mini
                                hold_action:
                                  action: more-info
                card_mod: *2nd_button_style
              - type: custom:mushroom-template-card
                entity: fan.open_air_mini
                icon: mdi:fan
                icon_color: |-
                  {{ "green" if is_state('fan.open_air_mini', 'on') else "grey" }}
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      title: Mechanische afzuiging
                      content:
                        type: vertical-stack
                        cards:
                          - type: custom:mushroom-fan-card
                            entity: fan.open_air_mini
                            name: Afzuiging
                            icon_animation: true
                            show_percentage_control: true
                            layout: horizontal
                          - type: custom:mushroom-chips-card
                            chips:
                              - type: template
                                content: "Boost:"
                              - type: action
                                icon: mdi:fast-forward-15
                                tap_action:
                                  action: perform-action
                                  perform_action: timer.start
                                  target:
                                    entity_id: timer.fan_runtime
                                  data:
                                    duration: "00:15:00"
                              - type: action
                                icon: mdi:fast-forward-30
                                tap_action:
                                  action: perform-action
                                  perform_action: timer.start
                                  target:
                                    entity_id: timer.fan_runtime
                                  data:
                                    duration: "00:30:00"
                              - type: action
                                icon: mdi:fast-forward-60
                                tap_action:
                                  action: perform-action
                                  perform_action: timer.start
                                  target:
                                    entity_id: timer.fan_runtime
                                  data:
                                    duration: "00:60:00"
                              - type: action
                                icon: mdi:timer-off-outline
                                tap_action:
                                  action: perform-action
                                  perform_action: timer.finish
                                  target:
                                    entity_id: timer.fan_runtime
                              - type: conditional
                                conditions:
                                  - entity: timer.fan_runtime
                                    state: active
                                chip:
                                  type: template
                                  entity: timer.fan_runtime
                                  icon: mdi:timer-sand-empty
                                  content: >-
                                    {% from 'relative_time_plus.jinja' import relative_time_plus %}
                                    {{ relative_time_plus(state_attr('timer.fan_runtime','finishes_at'),
                                        parts=2, time=true, abbr=true, language='nl') }}
                                  tap_action:
                                    action: none
                card_mod:
                  style: |
                    ha-card {
                      width: 66px;
                      margin-left: 66%;
                      top: -163px;
                      background: none;
                    }
                    :host {
                      --mush-icon-size: 40px;
                    }
                    ha-state-icon {
                    {% if is_state(config.entity, 'on')%}
                        animation: rotate {{0.5 / (state_attr(config.entity, 'percentage')/100) | round(1, default=1)}}s infinite linear }
                    @keyframes rotate {
                      0% { transform: rotate(0deg); }
                      100% { transform: rotate(359deg); }
                    {% endif %}
                    }

              - type: custom:mushroom-template-card
                icon: none
                icon_color: none
                tap_action:
                  action: navigate
                  navigation_path: /lovelace/other
                card_mod: *4th_button_style
